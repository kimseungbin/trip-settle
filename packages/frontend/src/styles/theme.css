/**
 * Trip Settle - Color Theming System
 *
 * Architecture:
 * 1. Primitive colors - Base palette using OKLCH for perceptual uniformity
 * 2. Semantic tokens - Role-based variables (--color-primary, --color-surface)
 * 3. Component tokens - Component-specific overrides
 *
 * Color Spaces:
 * - OKLCH: Perceptually uniform color space (adjusting lightness looks proportional)
 * - Fallback: RGB/hex for older browsers
 *
 * Theme Modes: light | dark (controlled via [data-theme] attribute)
 */

/* ==========================================================================
   Base Theme Variables (Light Mode)
   ========================================================================== */

:root {
	/* ===== Primitive Colors (OKLCH) ===== */

	/* Primary - Svelte Orange */
	--color-primary-l: 62%;
	--color-primary-c: 0.21;
	--color-primary-h: 28deg;

	/* Neutral - Grayscale */
	--color-neutral-0-l: 100%; /* White */
	--color-neutral-100-l: 96%; /* Lightest gray */
	--color-neutral-200-l: 88%;
	--color-neutral-300-l: 75%;
	--color-neutral-400-l: 60%;
	--color-neutral-500-l: 50%;
	--color-neutral-600-l: 40%;
	--color-neutral-700-l: 30%;
	--color-neutral-800-l: 20%;
	--color-neutral-900-l: 12%; /* Darkest gray */
	--color-neutral-1000-l: 0%; /* Black */

	/* Success, Warning, Error */
	--color-success-h: 145deg; /* Green */
	--color-warning-h: 85deg; /* Yellow */
	--color-error-h: 15deg; /* Red */

	/* ===== Semantic Tokens (Light Mode) ===== */

	/* Primary color and variants */
	--color-primary: oklch(var(--color-primary-l) var(--color-primary-c) var(--color-primary-h)); /* #ff3e00 */
	--color-primary-hover: oklch(calc(var(--color-primary-l) - 8%) var(--color-primary-c) var(--color-primary-h));
	--color-primary-active: oklch(calc(var(--color-primary-l) - 12%) var(--color-primary-c) var(--color-primary-h));
	--color-primary-light: oklch(
		calc(var(--color-primary-l) + 15%) calc(var(--color-primary-c) * 0.5) var(--color-primary-h)
	);
	--color-primary-alpha-10: oklch(var(--color-primary-l) var(--color-primary-c) var(--color-primary-h) / 0.1);
	--color-primary-alpha-20: oklch(var(--color-primary-l) var(--color-primary-c) var(--color-primary-h) / 0.2);
	--color-primary-alpha-30: oklch(var(--color-primary-l) var(--color-primary-c) var(--color-primary-h) / 0.3);

	/* Surface colors (backgrounds) */
	--color-surface: oklch(var(--color-neutral-0-l) 0 0); /* White */
	--color-surface-1: oklch(var(--color-neutral-100-l) 0 0); /* Slightly gray */
	--color-surface-2: oklch(var(--color-neutral-200-l) 0 0); /* More gray */
	--color-surface-3: oklch(var(--color-neutral-300-l) 0 0); /* Even more gray */

	/* Text colors */
	--color-text: oklch(var(--color-neutral-900-l) 0 0); /* Almost black */
	--color-text-secondary: oklch(var(--color-neutral-700-l) 0 0); /* Lighter text */
	--color-text-tertiary: oklch(var(--color-neutral-500-l) 0 0); /* Even lighter */
	--color-text-disabled: oklch(var(--color-neutral-400-l) 0 0); /* Disabled state */

	/* Border colors */
	--color-border: oklch(var(--color-neutral-300-l) 0 0);
	--color-border-light: oklch(var(--color-neutral-200-l) 0 0);
	--color-border-dark: oklch(var(--color-neutral-400-l) 0 0);

	/* Interactive states */
	--color-hover-overlay: oklch(var(--color-neutral-900-l) 0 0 / 0.05);
	--color-active-overlay: oklch(var(--color-neutral-900-l) 0 0 / 0.1);
	--color-focus-ring: var(--color-primary);

	/* Status colors */
	--color-success: oklch(65% 0.15 var(--color-success-h));
	--color-success-light: oklch(85% 0.08 var(--color-success-h));
	--color-warning: oklch(75% 0.15 var(--color-warning-h));
	--color-warning-light: oklch(90% 0.08 var(--color-warning-h));
	--color-error: oklch(60% 0.18 var(--color-error-h));
	--color-error-light: oklch(85% 0.09 var(--color-error-h));

	/* Shadows */
	--shadow-sm: 0 1px 2px 0 oklch(var(--color-neutral-900-l) 0 0 / 0.05);
	--shadow-md: 0 4px 6px -1px oklch(var(--color-neutral-900-l) 0 0 / 0.1);
	--shadow-lg: 0 10px 15px -3px oklch(var(--color-neutral-900-l) 0 0 / 0.1);
	--shadow-xl: 0 20px 25px -5px oklch(var(--color-neutral-900-l) 0 0 / 0.1);

	/* Transitions */
	--transition-fast: 150ms ease;
	--transition-normal: 250ms ease;
	--transition-slow: 350ms ease;
}

/* ==========================================================================
   Dark Theme
   ========================================================================== */

[data-theme='dark'] {
	/* ===== Semantic Tokens (Dark Mode) ===== */

	/* Primary color - slightly brighter for dark backgrounds */
	--color-primary-l: 68%;

	/* Surface colors (softer dark backgrounds) */
	--color-surface: oklch(18% 0 0); /* Dark gray, not pure black */
	--color-surface-1: oklch(22% 0 0); /* Slightly lighter - for cards/boxes */
	--color-surface-2: oklch(26% 0 0); /* More lighter - for elevated elements */
	--color-surface-3: oklch(30% 0 0); /* Even lighter - for hover states */

	/* Text colors - softer whites */
	--color-text: oklch(92% 0 0); /* Soft white, not pure white */
	--color-text-secondary: oklch(70% 0 0); /* Medium gray */
	--color-text-tertiary: oklch(55% 0 0); /* Lighter gray */
	--color-text-disabled: oklch(45% 0 0); /* Disabled state */

	/* Border colors - subtle */
	--color-border: oklch(35% 0 0);
	--color-border-light: oklch(28% 0 0);
	--color-border-dark: oklch(42% 0 0);

	/* Interactive states */
	--color-hover-overlay: oklch(100% 0 0 / 0.05);
	--color-active-overlay: oklch(100% 0 0 / 0.1);

	/* Status colors - adjusted for dark backgrounds */
	--color-success: oklch(70% 0.15 var(--color-success-h));
	--color-success-light: oklch(25% 0.08 var(--color-success-h));
	--color-warning: oklch(78% 0.15 var(--color-warning-h));
	--color-warning-light: oklch(30% 0.08 var(--color-warning-h));
	--color-error: oklch(68% 0.18 var(--color-error-h));
	--color-error-light: oklch(25% 0.09 var(--color-error-h));

	/* Shadows - subtle for dark mode */
	--shadow-sm: 0 1px 2px 0 oklch(0% 0 0 / 0.3);
	--shadow-md: 0 4px 6px -1px oklch(0% 0 0 / 0.4);
	--shadow-lg: 0 10px 15px -3px oklch(0% 0 0 / 0.5);
	--shadow-xl: 0 20px 25px -5px oklch(0% 0 0 / 0.6);
}

/* ==========================================================================
   Fallback for browsers without OKLCH support
   ========================================================================== */

@supports not (color: oklch(0% 0 0)) {
	:root {
		/* Light mode fallbacks (RGB) */
		--color-primary: #ff3e00;
		--color-primary-hover: #e63900;
		--color-primary-active: #cc3200;
		--color-primary-light: #ffcbb3;
		--color-primary-alpha-10: rgba(255, 62, 0, 0.1);
		--color-primary-alpha-20: rgba(255, 62, 0, 0.2);
		--color-primary-alpha-30: rgba(255, 62, 0, 0.3);

		--color-surface: #ffffff;
		--color-surface-1: #f5f5f5;
		--color-surface-2: #e0e0e0;
		--color-surface-3: #cccccc;

		--color-text: #1a1a1a;
		--color-text-secondary: #4d4d4d;
		--color-text-tertiary: #808080;
		--color-text-disabled: #999999;

		--color-border: #cccccc;
		--color-border-light: #e0e0e0;
		--color-border-dark: #999999;

		--color-hover-overlay: rgba(0, 0, 0, 0.05);
		--color-active-overlay: rgba(0, 0, 0, 0.1);

		--color-success: #10b981;
		--color-success-light: #d1fae5;
		--color-warning: #f59e0b;
		--color-warning-light: #fef3c7;
		--color-error: #ef4444;
		--color-error-light: #fee2e2;

		--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
		--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
		--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
		--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
	}

	[data-theme='dark'] {
		/* Dark mode fallbacks (RGB) - softer colors */
		--color-primary: #ff6633;
		--color-primary-hover: #ff5020;
		--color-primary-active: #ff3e0d;

		--color-surface: #2d2d2d; /* Dark gray, not pure black */
		--color-surface-1: #383838; /* Cards/boxes - slightly lighter */
		--color-surface-2: #424242; /* Elevated elements */
		--color-surface-3: #4d4d4d; /* Hover states */

		--color-text: #ebebeb; /* Soft white */
		--color-text-secondary: #b3b3b3; /* Medium gray */
		--color-text-tertiary: #8c8c8c; /* Lighter gray */
		--color-text-disabled: #737373; /* Disabled */

		--color-border: #595959;
		--color-border-light: #474747;
		--color-border-dark: #6b6b6b;

		--color-hover-overlay: rgba(255, 255, 255, 0.05);
		--color-active-overlay: rgba(255, 255, 255, 0.1);

		--color-success: #34d399;
		--color-success-light: #1a3a2e;
		--color-warning: #fbbf24;
		--color-warning-light: #3d301a;
		--color-error: #f87171;
		--color-error-light: #3d1a1a;

		--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
		--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
		--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
		--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
	}
}

/* ==========================================================================
   Smooth transitions when switching themes
   ========================================================================== */

:root {
	color-scheme: light;
}

[data-theme='dark'] {
	color-scheme: dark;
}

/* Transition all color properties smoothly */
* {
	transition:
		background-color var(--transition-normal),
		border-color var(--transition-normal),
		color var(--transition-normal),
		box-shadow var(--transition-normal);
}

/* Disable transitions on first load and for reduced motion */
@media (prefers-reduced-motion: reduce) {
	* {
		transition: none !important;
	}
}
